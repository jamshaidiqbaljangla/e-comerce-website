document.addEventListener('DOMContentLoaded',()=>{const lazyImages=document.querySelectorAll('img[data-src]');if('IntersectionObserver' in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;if(img.dataset.srcset){img.srcset=img.dataset.srcset;}img.removeAttribute('data-src');img.removeAttribute('data-srcset');imageObserver.unobserve(img);}});});lazyImages.forEach(img=>imageObserver.observe(img));}else{setTimeout(()=>{lazyImages.forEach(img=>{img.src=img.dataset.src;if(img.dataset.srcset){img.srcset=img.dataset.srcset;}});},300);}const allImages=document.querySelectorAll('img:not([width]):not([height])');allImages.forEach(img=>{img.addEventListener('load',()=>{if(!img.hasAttribute('width')&&!img.hasAttribute('height')){img.setAttribute('width',img.naturalWidth);img.setAttribute('height',img.naturalHeight);}});});});function supportsWebP(){const elem=document.createElement('canvas');if(elem.getContext&&elem.getContext('2d')){return elem.toDataURL('image/webp').indexOf('data:image/webp')===0;}return false;}if(supportsWebP()){document.documentElement.classList.add('webp');}else{document.documentElement.classList.add('no-webp');}