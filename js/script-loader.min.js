const scriptModules={'core':['js/auth-manager.js','js/offline-handler.js'],'product':['js/fallback-products.js','js/products-data.js','js/product-renderer.js'],'shop':['js/category-data.js','js/shop-manager.js','js/category.js','js/collection-manager.js'],'cart':['js/cart-manager.js','js/wishlist-manager.js'],'account':['js/account-manager.js'],'search':['js/search-manager.js'],'debug':['js/debug-config.js'],'main':['js/main.js']};const loadScriptGroup=(group,onComplete)=>{if(!scriptModules[group]||scriptModules[group].length===0){if(onComplete)onComplete();return;}let loaded=0;const totalScripts=scriptModules[group].length;const checkAllLoaded=()=>{loaded++;if(loaded===totalScripts&&onComplete){onComplete();}};scriptModules[group].forEach(src=>{const script=document.createElement('script');script.src=src;script.async=true;script.defer=true;script.onload=checkAllLoaded;script.onerror=()=>{console.error(`Failed to load script:${src}`);checkAllLoaded();};document.body.appendChild(script);});};const loadBundles=()=>{const sequence=['core','product','shop','cart','account','search','debug','main'];let currentIndex=0;const loadNextBundle=()=>{if(currentIndex>=sequence.length)return;const bundle=sequence[currentIndex++];loadScriptGroup(bundle,loadNextBundle);};loadNextBundle();};if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',loadBundles);}else{loadBundles();}