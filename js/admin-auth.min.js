document.addEventListener('DOMContentLoaded',function(){const token=localStorage.getItem('adminAuthToken');const user=JSON.parse(localStorage.getItem('adminUser'));if(!token||!user||user.role!=='admin'){if(!window.location.pathname.endsWith('admin-login.html')){window.location.href='admin-login.html';}return;}if(window.location.pathname.endsWith('admin-login.html')){window.location.href='admin.html';return;}const originalFetch=window.fetch;window.fetch=function(url,options){const newOptions={...options};if(!newOptions.headers){newOptions.headers={};}newOptions.headers['Authorization']=`Bearer ${token}`;return originalFetch(url,newOptions);};const logoutButton=document.querySelector('a[href="logout.html"]');if(logoutButton){logoutButton.addEventListener('click',function(e){e.preventDefault();localStorage.removeItem('adminAuthToken');localStorage.removeItem('adminUser');window.location.href='admin-login.html';});}});